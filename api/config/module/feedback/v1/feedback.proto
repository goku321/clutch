syntax = "proto3";

package clutch.config.module.feedback.v1;

option go_package = "github.com/lyft/clutch/backend/api/config/module/feedback/v1;feedbackv1";

import "validate/validate.proto";

message Config {
  repeated OriginQuestion origins = 1 [ (validate.rules).repeated = {min_items : 1} ];
  // Use if freeform feedback prompt is the same for all feedback origins
  string freeform_question = 2;
  // Use if rating options are the same for all feedback origins
  RatingOptions rating_options = 3;
}

message OriginQuestion {
  oneof type {
    option (validate.required) = true;

    // currently these are the supported placements for feedback
    Question header = 1;
    Question wizard = 2;
  }
}

message Question {
  string question = 1 [ (validate.rules).string = {min_bytes : 1} ];
  // Use if this question has a custom prompt for freeform feedback
  string freeform_question = 2;
  // Use if this question has custom rating options
  RatingOptions rating_options = 3;
}

message RatingOptions {
  // the text (i.e. "bad", "ok", "great") for each value in the rating system
  // currently a three-point rating system (and UI designs) are supported
  string one = 1 [ (validate.rules).string = {min_bytes : 1} ];
  string two = 2 [ (validate.rules).string = {min_bytes : 1} ];
  string three = 3 [ (validate.rules).string = {min_bytes : 1} ];
}
